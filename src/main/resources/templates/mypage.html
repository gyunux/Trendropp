<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <title th:text="#{mypage.title} + ' - ' + ${@environment.getProperty('site.name')}">계정 설정</title>

    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/css/auth-style.css}">
    <link rel="stylesheet" th:href="@{/css/mypage.css}">
</head>
<body>

<div th:replace="~{common/layout :: sidebar}"></div>

<main class="main-content">
    <div class="detail-page-container">

        <div th:replace="~{common/header :: header(pageTitle=#{mypage.title})}"></div>

        <nav class="mypage-tabs">
            <a th:href="@{/mypage}" class="active" th:text="#{mypage.title}">계정 설정</a>
        </nav>

        <div class="mypage-forms-container">

            <div class="content-body">
                <h2 th:text="#{mypage.account.title}">계정 정보</h2>
                <div class="form-group">
                    <label th:text="#{mypage.account.userId}">아이디</label>
                    <input type="text" th:value="${member.userId}" readonly class="form-input">
                </div>
                <div class="form-group">
                    <label th:text="#{mypage.account.name}">이름</label>
                    <input type="text" th:value="${member.name}" readonly class="form-input">
                </div>
            </div>

            <div class="content-body">
                <form id="email-change-form">
                    <h2 th:text="#{mypage.email.title}">이메일 변경</h2>
                    <p class="current-info">
                        <span th:text="#{mypage.email.current}">현재 이메일: </span>
                        <span th:text="${member.email}"></span>
                    </p>
                    <div class="form-group">
                        <label for="new-email" th:text="#{mypage.email.new}">새 이메일</label>
                        <input type="email" id="new-email" class="form-input" required>
                        <small id="email-helper" class="form-helper"></small>
                    </div>
                    <div class="form-group">
                        <label for="email-current-password" th:text="#{mypage.email.password}">현재 비밀번호 (확인용)</label>
                        <input type="password" id="email-current-password" class="form-input" required>
                    </div>
                    <small id="email-form-error" class="form-helper error-message"></small>
                    <button type="submit" id="change-email-btn" class="btn btn-primary" style="margin-top: 1rem;"
                            th:text="#{mypage.email.button}">이메일 변경
                    </button>
                </form>
            </div>

            <div class="content-body">
                <form id="password-change-form">
                    <h2 th:text="#{mypage.password.title}">비밀번호 변경</h2>
                    <div class="form-group">
                        <label for="current-password" th:text="#{mypage.password.current}">현재 비밀번호</label>
                        <input type="password" id="current-password" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="new-password" th:text="#{mypage.password.new}">새 비밀번호</label>
                        <input type="password" id="new-password" class="form-input" required>
                        <small id="password-helper" class="form-helper" th:text="#{mypage.password.helper}">6자 이상, 소문자와
                            숫자 필수</small>
                    </div>
                    <div class="form-group">
                        <label for="new-password-confirm" th:text="#{mypage.password.confirm}">새 비밀번호 확인</label>
                        <input type="password" id="new-password-confirm" class="form-input" required>
                        <small id="password-confirm-helper" class="form-helper"></small>
                    </div>
                    <small id="password-form-error" class="form-helper error-message"></small>
                    <button type="submit" id="change-password-btn" class="btn btn-primary" style="margin-top: 1rem;"
                            th:text="#{mypage.password.button}">비밀번호 변경
                    </button>
                </form>
            </div>

            <div class="content-body danger-zone">
                <h2 th:text="#{mypage.deactivate.title}">회원 탈퇴</h2>
                <button id="deactivate-btn" class="btn btn-danger" th:text="#{mypage.deactivate.button}">계정 삭제</button>
            </div>
        </div>

        <div id="delete-account-modal" class="modal-overlay">
            <div class="auth-container">
                <button type="button" class="close-btn">&times;</button>
                <h1 class="auth-title" th:text="#{mypage.deactivate.title}">회원 탈퇴</h1>
                <form id="delete-account-form" method="post">
                    <p style="text-align: center; margin-bottom: 1.5rem;"
                       th:utext="#{mypage.deactivate.confirmText}">
                        정말로 계정을 탈퇴하시겠습니까?<br>
                        본인 확인을 위해 비밀번호를 입력해주세요.
                    </p>
                    <div class="form-group">
                        <label for="delete-password" th:text="#{mypage.password.current}">현재 비밀번호</label>
                        <input type="password" id="delete-password" class="form-input" required>
                    </div>
                    <small id="delete-form-error" class="form-helper error-message"></small>
                    <button type="submit" class="btn btn-danger" style="margin-top: 1rem;"
                            th:text="#{mypage.deactivate.button}">계정 삭제
                    </button>
                </form>
            </div>
        </div>

    </div>
</main>

<div th:replace="~{common/header :: auth-modals}"></div>
<script th:src="@{/js/auth.js}"></script>
<script th:src="@{/js/mypage.js}"></script>

</body>
</html>